<div class="group-page">
    <div class="group overflow-hidden flex flex-col" *ngIf="group">
        <textarea-auto>
            <textarea
                appTextareaAuto
                class="text-2xl mb-4 py-2 hover:bg-base-200"
                (blur)="updateGroup(control.value)"
                [formControl]="control"
            ></textarea>
        </textarea-auto>

        <div class="mb-2">
            <app-create-note-form
                (onCreateNote)="createNote($event)">
            </app-create-note-form>
        </div>

        <div class="notes overflow-y-scroll h-full">
            <app-note-item
                *ngFor="let note of activeNotes"
                [note]="note"
                [checked]="(checkedNote$ | async)?.id === note.id"
                (onChecked)="onCompleteNote(note, $event)"
                (onDelete)="deleteNote(note)"
                (click)="checkNote(note)">
            </app-note-item>

            <ng-container *ngIf="completedNotes.length">
                <h3 class="text-lg mb-2">Завершенные</h3>
            </ng-container>

            <app-note-item
                *ngFor="let note of completedNotes"
                [note]="note"
                [checked]="(checkedNote$ | async)?.id === note.id"
                (onChecked)="onCompleteNote(note, $event)"
                (onDelete)="deleteNote(note)"
                (click)="checkNote(note)">
            </app-note-item>
        </div>
    </div>

    <app-group-page-menu
        [note]="checkedNote$ | async"
        [tags]="(tags$ | async) || []"
        (onUpdateNote)="updateNote($event)"
        (onDeleteNote)="deleteNote($event)">
    </app-group-page-menu>
</div>
